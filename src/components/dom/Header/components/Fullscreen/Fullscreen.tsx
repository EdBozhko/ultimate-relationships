'use client';

import { useEffect, useState } from 'react';
import { FullscreenIconComponent } from './Fullscreen.types.ts';

export const FullscreenIcon: FullscreenIconComponent = (props) => {
  const [isFullscreen, setIsFullscreen] = useState(() => {
    if (typeof document === 'undefined') return false;
    //@ts-expect-error
    return !!(document.fullscreenElement || document.webkitFullscreenElement);
  });
  const { color } = props;

  useEffect(() => {
    const handleChange = () => {
      //@ts-expect-error
      setIsFullscreen(!!(document.fullscreenElement || document.webkitFullscreenElement));
    };

    document.addEventListener('fullscreenchange', handleChange);
    document.addEventListener('webkitfullscreenchange', handleChange);

    handleChange();

    return () => {
      document.removeEventListener('fullscreenchange', handleChange);
      document.removeEventListener('webkitfullscreenchange', handleChange);
    };
  }, []);

  return (
    <>
      {isFullscreen ? (
        <svg
          xmlns='http://www.w3.org/2000/svg'
          xmlSpace='preserve'
          preserveAspectRatio='none'
          viewBox='-100 -100 700 700'
          fill={color}
          {...props}
        >
          <path d='M320.106 172.772c.031.316.09.622.135.933.054.377.098.755.172 1.13.071.358.169.705.258 1.056.081.323.152.648.249.968.104.345.234.678.355 1.015.115.319.22.641.35.956.131.315.284.618.43.925.152.323.296.65.466.967.158.294.337.574.508.86.186.311.362.626.565.93.211.316.447.613.674.917.19.253.365.513.568.759a21.422 21.422 0 0 0 2.977 2.977c.246.202.506.378.759.567.304.228.601.463.918.675.303.203.618.379.929.565.286.171.566.351.861.509.317.17.644.314.968.466.307.145.609.298.924.429.315.13.637.236.957.35.337.121.669.25 1.013.354.32.097.646.168.969.249.351.089.698.187 1.055.258.375.074.753.119 1.13.173.311.044.617.104.932.135.7.069 1.403.106 2.105.106H448c11.782 0 21.333-9.551 21.333-21.333 0-11.782-9.551-21.333-21.333-21.333h-55.163L505.752 36.418c8.331-8.331 8.331-21.839 0-30.17-8.331-8.331-21.839-8.331-30.17 0L362.667 119.163V64c0-11.782-9.551-21.333-21.333-21.333C329.551 42.667 320 52.218 320 64v106.668c0 .702.037 1.404.106 2.104zM170.667 42.667c-11.782 0-21.333 9.551-21.333 21.333v55.163L36.418 6.248c-8.331-8.331-21.839-8.331-30.17 0-8.331 8.331-8.331 21.839 0 30.17l112.915 112.915H64c-11.782 0-21.333 9.551-21.333 21.333C42.667 182.449 52.218 192 64 192h106.667c.703 0 1.405-.037 2.105-.106.316-.031.622-.09.933-.135.377-.054.755-.098 1.13-.172.358-.071.705-.169 1.056-.258.323-.081.648-.152.968-.249.345-.104.678-.234 1.015-.355.319-.115.641-.22.956-.35.315-.131.618-.284.925-.43.323-.152.65-.296.967-.466.295-.158.575-.338.862-.509.311-.185.625-.361.928-.564.317-.212.615-.448.92-.676.252-.189.511-.364.757-.566a21.477 21.477 0 0 0 2.977-2.977c.202-.246.377-.505.566-.757.228-.305.464-.603.676-.92.203-.303.378-.617.564-.928.171-.286.351-.567.509-.862.17-.317.313-.643.466-.967.145-.307.299-.61.43-.925.13-.315.235-.636.35-.956.121-.337.25-.67.355-1.015.097-.32.168-.645.249-.968.089-.351.187-.698.258-1.056.074-.375.118-.753.172-1.13.044-.311.104-.618.135-.933.069-.7.106-1.402.106-2.104V64c-.002-11.782-9.553-21.333-21.335-21.333zM191.894 339.228c-.031-.316-.09-.622-.135-.933-.054-.377-.098-.755-.172-1.13-.071-.358-.169-.705-.258-1.056-.081-.323-.152-.648-.249-.968-.104-.345-.234-.678-.355-1.015-.115-.319-.22-.641-.35-.956-.131-.315-.284-.618-.43-.925-.152-.323-.296-.65-.466-.967-.158-.295-.338-.575-.509-.862-.185-.311-.361-.625-.564-.928-.212-.317-.448-.615-.676-.92-.189-.252-.364-.511-.566-.757a21.477 21.477 0 0 0-2.977-2.977c-.246-.202-.505-.377-.757-.566-.305-.228-.603-.464-.92-.676-.303-.203-.617-.378-.928-.564-.286-.171-.567-.351-.862-.509-.317-.17-.643-.313-.967-.466-.307-.145-.61-.299-.925-.43-.315-.13-.636-.235-.956-.35-.337-.121-.67-.25-1.015-.355-.32-.097-.645-.168-.968-.249-.351-.089-.698-.187-1.056-.258-.375-.074-.753-.118-1.13-.172-.311-.044-.618-.104-.933-.135-.7-.069-1.403-.106-2.105-.106H64c-11.782 0-21.333 9.551-21.333 21.333 0 11.782 9.551 21.333 21.333 21.333h55.163L6.248 475.582c-8.331 8.331-8.331 21.839 0 30.17 8.331 8.331 21.839 8.331 30.17 0l112.915-112.915V448c0 11.782 9.551 21.333 21.333 21.333 11.782 0 21.333-9.551 21.333-21.333V341.332a21.142 21.142 0 0 0-.105-2.104zM392.837 362.667H448c11.782 0 21.333-9.551 21.333-21.333 0-11.782-9.551-21.333-21.333-21.333H341.333c-.703 0-1.405.037-2.105.106-.315.031-.621.09-.932.135-.378.054-.756.098-1.13.173-.358.071-.704.169-1.055.258-.324.081-.649.152-.969.249-.344.104-.677.233-1.013.354-.32.115-.642.22-.957.35-.315.131-.617.284-.924.429-.324.153-.65.296-.968.466-.295.158-.575.338-.861.509-.311.186-.626.362-.929.565-.316.212-.614.447-.918.675-.253.19-.512.365-.759.567a21.422 21.422 0 0 0-2.977 2.977c-.202.246-.378.506-.568.759-.227.304-.463.601-.674.917-.203.304-.379.619-.565.93-.171.286-.351.566-.508.86-.17.317-.313.643-.466.967-.145.307-.299.61-.43.925-.13.315-.235.636-.35.956-.121.337-.25.67-.355 1.015-.097.32-.168.645-.249.968-.089.351-.187.698-.258 1.056-.074.374-.118.753-.172 1.13-.044.311-.104.618-.135.933-.069.7-.106 1.402-.106 2.104V448c0 11.782 9.551 21.333 21.333 21.333 11.782 0 21.333-9.551 21.333-21.333v-55.163l112.915 112.915c8.331 8.331 21.839 8.331 30.17 0 8.331-8.331 8.331-21.839 0-30.17L392.837 362.667z' />
        </svg>
      ) : (
        <svg
          xmlns='http://www.w3.org/2000/svg'
          xmlSpace='preserve'
          preserveAspectRatio='none'
          viewBox='-100 -100 700 700'
          fill={color}
          {...props}
        >
          <path d='M335.085 207.085 469.333 72.837V128c0 11.782 9.551 21.333 21.333 21.333S512 139.782 512 128V21.335c0-.703-.037-1.406-.106-2.107-.031-.316-.09-.622-.135-.933-.054-.377-.098-.755-.172-1.13-.071-.358-.169-.705-.258-1.056-.081-.323-.152-.648-.249-.968-.104-.345-.234-.678-.355-1.015-.115-.319-.22-.641-.35-.956-.13-.315-.284-.616-.428-.923-.153-.324-.297-.651-.467-.969-.158-.294-.337-.574-.508-.86-.186-.311-.362-.626-.565-.93-.211-.316-.447-.613-.674-.917-.19-.253-.366-.513-.568-.76a21.46 21.46 0 0 0-1.402-1.551l-.011-.012-.011-.01a21.489 21.489 0 0 0-1.552-1.403c-.247-.203-.507-.379-.761-.569-.303-.227-.6-.462-.916-.673-.304-.203-.619-.379-.931-.565-.286-.171-.565-.35-.859-.508-.318-.17-.644-.314-.969-.467-.307-.145-.609-.298-.923-.429-.315-.13-.637-.236-.957-.35-.337-.121-.669-.25-1.013-.354-.32-.097-.646-.168-.969-.249-.351-.089-.698-.187-1.055-.258-.375-.074-.753-.119-1.13-.173-.311-.044-.617-.104-.933-.135A21.803 21.803 0 0 0 490.667 0H384c-11.782 0-21.333 9.551-21.333 21.333 0 11.782 9.551 21.333 21.333 21.333h55.163L304.915 176.915c-8.331 8.331-8.331 21.839 0 30.17s21.839 8.331 30.17 0zM176.915 304.915 42.667 439.163V384c0-11.782-9.551-21.333-21.333-21.333C9.551 362.667 0 372.218 0 384v106.667c0 .703.037 1.405.106 2.105.031.315.09.621.135.933.054.377.098.756.173 1.13.071.358.169.704.258 1.055.081.324.152.649.249.969.104.344.233.677.354 1.013.115.32.22.642.35.957.13.315.284.616.429.923.153.324.297.651.467.969.158.294.337.573.508.859.186.311.362.627.565.931.211.316.446.612.673.916.19.254.366.514.569.761.443.54.91 1.059 1.403 1.552l.01.011.012.011c.493.492 1.012.959 1.551 1.402.247.203.507.379.76.568.304.227.601.463.917.674.303.203.618.379.93.565.286.171.565.35.86.508.318.17.645.314.969.467.307.145.609.298.923.428.315.13.636.235.956.35.337.121.67.25 1.015.355.32.097.645.168.968.249.351.089.698.187 1.056.258.375.074.753.118 1.13.172.311.044.618.104.933.135.7.069 1.402.106 2.104.106H128c11.782 0 21.333-9.551 21.333-21.333s-9.551-21.333-21.333-21.333H72.837l134.248-134.248c8.331-8.331 8.331-21.839 0-30.17s-21.839-8.331-30.17 0zM507.736 503.425c.226-.302.461-.598.671-.913.204-.304.38-.62.566-.932.17-.285.349-.564.506-.857.17-.318.315-.646.468-.971.145-.306.297-.607.428-.921.13-.315.236-.637.35-.957.121-.337.25-.669.354-1.013.097-.32.168-.646.249-.969.089-.351.187-.698.258-1.055.074-.375.118-.753.173-1.13.044-.311.104-.617.135-.933a21.51 21.51 0 0 0 .106-2.107V384c0-11.782-9.551-21.333-21.333-21.333s-21.333 9.551-21.333 21.333v55.163L335.085 304.915c-8.331-8.331-21.839-8.331-30.17 0s-8.331 21.839 0 30.17l134.248 134.248H384c-11.782 0-21.333 9.551-21.333 21.333S372.218 512 384 512h106.667c.703 0 1.405-.037 2.105-.106.315-.031.621-.09.933-.135.377-.054.756-.098 1.13-.173.358-.071.704-.169 1.055-.258.324-.081.649-.152.969-.249.344-.104.677-.233 1.013-.354.32-.115.642-.22.957-.35.314-.13.615-.283.921-.428.325-.153.653-.297.971-.468.293-.157.572-.336.857-.506.312-.186.628-.363.932-.566.315-.211.611-.445.913-.671.255-.191.516-.368.764-.571.535-.439 1.05-.903 1.54-1.392l.023-.021.021-.023c.488-.49.952-1.004 1.392-1.54.205-.248.382-.509.573-.764zM72.837 42.667H128c11.782 0 21.333-9.551 21.333-21.333C149.333 9.551 139.782 0 128 0H21.332c-.702 0-1.405.037-2.104.106-.316.031-.622.09-.933.135-.377.054-.755.098-1.13.172-.358.071-.705.169-1.056.258-.323.081-.648.152-.968.249-.345.104-.678.234-1.015.355-.319.115-.641.22-.956.35-.315.131-.618.284-.925.43-.323.152-.65.296-.967.466-.295.158-.575.338-.862.509-.31.185-.625.36-.928.563-.317.212-.615.448-.92.676-.252.189-.511.364-.756.566a21.477 21.477 0 0 0-2.977 2.977c-.202.245-.377.504-.566.757-.228.305-.464.603-.676.92-.203.303-.378.617-.564.928-.171.286-.351.567-.509.862-.17.317-.313.643-.466.967-.145.307-.299.61-.43.925-.13.315-.235.636-.35.956-.121.337-.25.67-.355 1.015-.097.32-.168.645-.249.968-.089.351-.187.698-.258 1.056-.074.375-.118.753-.172 1.13-.044.311-.104.618-.135.933A21.73 21.73 0 0 0 0 21.333V128c0 11.782 9.551 21.333 21.333 21.333 11.782 0 21.333-9.551 21.333-21.333V72.837l134.248 134.248c8.331 8.331 21.839 8.331 30.17 0s8.331-21.839 0-30.17L72.837 42.667z' />
        </svg>
      )}
    </>
  );
};
